syntax = "proto3";

package bannote.studyroomservice.room.v1;

import "google/protobuf/timestamp.proto";

// 스터디룸 상태 (ENUM)
enum RoomStatus {
  ROOM_STATUS_UNSPECIFIED = 0; // 지정되지 않음
  ROOM_STATUS_VACANT = 1;      // 공실
  ROOM_STATUS_OCCUPIED = 2;    // 입실
}

// 스터디룸 메시지 구조
message Room {
  int64 id = 1;                               // 스터디룸 ID
  string department_name = 2;                 // 학과명 (외부 서비스 참조)
  string name = 3;                            // 스터디룸 이름
  int32 minimum_member = 4;                   // 최소 인원
  RoomStatus status = 5;                      // 스터디룸 상태
  google.protobuf.Timestamp created_at = 6;   // 생성 시각
  google.protobuf.Timestamp updated_at = 7;   // 수정 시각
  int64 created_by = 8;                       // 생성자 (백엔드 내부 기록)
}

// 생성 요청
message CreateRoomRequest {
  int64 department_id = 1;
  string name = 2;
  int32 minimum_member = 3;
  RoomStatus status = 4;
}

message CreateRoomResponse {
  Room room = 1;
}

// 단건 조회
message GetRoomRequest {
  int64 id = 1;
}

message GetRoomResponse {
  Room room = 1;
}

// 목록 조회
message ListRoomsRequest {
  // 필터링 옵션 (예: 학과 ID, 상태 등)
}

message ListRoomsResponse {
  repeated Room rooms = 1;
}

// 수정
message UpdateRoomRequest {
  int64 id = 1;
  int64 department_id = 2;
  string name = 3;
  int32 minimum_member = 4;
  RoomStatus status = 5;
}

message UpdateRoomResponse {
  Room room = 1;
}

// 삭제
message DeleteRoomRequest {
  int64 id = 1;
}

message DeleteRoomResponse {}
